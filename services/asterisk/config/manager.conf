;
; Asterisk Manager Interface (AMI) Configuration
; Usado por FreePBX para gestión de Asterisk
;

[general]
enabled = yes
port = 5038
bindaddr = 0.0.0.0

; Habilitar HTTP AMI para acceso web
webenabled = yes
httptimeout = 60

; Seguridad
enablessl = no
sslcert = /etc/asterisk/keys/asterisk.crt
sslprikey = /etc/asterisk/keys/asterisk.key

; Timestamp en logs
timestampevents = yes

; ===========================================
; USUARIO FREEPBX
; ===========================================
[freepbx]
secret = ${FREEPBX_AMI_PASSWORD:-freepbx123}
deny = 0.0.0.0/0.0.0.0
permit = 127.0.0.1/255.255.255.255
permit = 172.16.0.0/12  ; Red Docker
read = all
write = all
writetimeout = 5000

; ===========================================
; USUARIO BACKEND (Para control programático)
; ===========================================
[backend]
secret = ${BACKEND_AMI_PASSWORD:-backend123}
deny = 0.0.0.0/0.0.0.0
permit = 172.16.0.0/12  ; Red Docker
read = all
write = all
writetimeout = 5000

; ===========================================
; USUARIO ARI (Para Asterisk REST Interface)
; ===========================================
[ari]
secret = ${ARI_PASSWORD:-ari123}
deny = 0.0.0.0/0.0.0.0
permit = 172.16.0.0/12
read = all
write = all
writetimeout = 5000
