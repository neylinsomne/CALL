# ===========================================
# AI Call Center Configuration
# ===========================================

# Hugging Face API Key (para descargar modelos)
HUGGINGFACE_API_KEY=hf_your_api_key_here

# ===========================================
# LM Studio Configuration
# ===========================================
LM_STUDIO_URL=http://host.docker.internal:1234/v1
LM_STUDIO_MODEL=local-model

# ===========================================
# Database Configuration
# ===========================================
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=callcenter
POSTGRES_PASSWORD=secure_password_change_me
POSTGRES_DB=callcenter

# ===========================================
# Asterisk / VOIP Configuration
# ===========================================
ASTERISK_SIP_PORT=5060
ASTERISK_WS_PORT=8088
ASTERISK_USER=agent
ASTERISK_PASSWORD=agent_password_change_me

# Caller ID para llamadas salientes
OUTBOUND_CALLERID=+1234567890

# WebRTC Password (para testing en navegador)
WEBRTC_PASSWORD=webrtc123

# ===========================================
# ARI (Asterisk REST Interface)
# ===========================================
ARI_PASSWORD=ari_password_change_me
ARI_DASHBOARD_PASSWORD=dashboard_readonly_password

# ===========================================
# AMI (Asterisk Manager Interface)
# ===========================================
FREEPBX_AMI_PASSWORD=freepbx_ami_password_change_me
BACKEND_AMI_PASSWORD=backend_ami_password_change_me

# ===========================================
# FreePBX Configuration
# ===========================================
FREEPBX_ADMIN_USER=admin
FREEPBX_ADMIN_PASSWORD=freepbx_admin_password_change_me

# ===========================================
# MariaDB (Para FreePBX)
# ===========================================
MYSQL_ROOT_PASSWORD=mysql_root_password_change_me
MYSQL_USER=asteriskuser
MYSQL_PASSWORD=mysql_password_change_me

# ===========================================
# Gateway FXO/FXS (Líneas fijas analógicas)
# Configura si tienes un Gateway Grandstream, Cisco, etc.
# ===========================================
GATEWAY_FXO_IP=192.168.1.100
GATEWAY_FXO_USER=gateway
GATEWAY_FXO_PASSWORD=gateway_password_change_me

# ===========================================
# SIP TRUNK - Proveedor VOIP
# Configura aquí tu proveedor de líneas telefónicas
# ===========================================
SIP_TRUNK_HOST=tu-proveedor.sip.com
SIP_TRUNK_USER=tu_usuario
SIP_TRUNK_PASSWORD=tu_password

# Si usas Grandstream con registro SIP:
# SIP_TRUNK_HOST=sip.grandstream.com
# SIP_TRUNK_USER=tu_numero
# SIP_TRUNK_PASSWORD=tu_password

# ===========================================
# NAT / Red - Configuración de IP Pública
# IMPORTANTE: Configura esto si tu servidor está detrás de NAT
# ===========================================

# Tu IP Pública (o dominio DDNS si es dinámica)
# Ejemplos:
#   EXTERNAL_IP=181.123.456.789
#   EXTERNAL_IP=micallcenter.ddns.net
# Dejar vacío para auto-detectar (requiere acceso a internet)
EXTERNAL_IP=

# Tu red local (formato CIDR)
# Ejemplos: 192.168.1.0/24, 10.0.0.0/8
LOCAL_NETWORK=192.168.1.0/24

# Redes adicionales locales (separadas por coma, opcional)
# ADDITIONAL_LOCAL_NETWORKS=10.0.0.0/8,172.16.0.0/12

# Rango de puertos RTP (audio)
RTP_PORT_START=10000
RTP_PORT_END=20000

# ===========================================
# Whitelist de IPs del Proveedor SIP (Seguridad)
# Separar múltiples IPs/rangos con comas
# Ejemplo: 200.100.50.0/24,201.200.100.0/24
# ===========================================
SIP_PROVIDER_WHITELIST=

# ===========================================
# DDNS - IP Dinámica (opcional)
# Si tu IP pública cambia, configura un servicio DDNS
# ===========================================
DDNS_ENABLED=false
DDNS_PROVIDER=duckdns
DDNS_DOMAIN=micallcenter
DDNS_TOKEN=tu_token_aqui
# Intervalo de actualización en segundos
DDNS_UPDATE_INTERVAL=300

# ===========================================
# Service Ports
# ===========================================
BACKEND_PORT=8000
TTS_PORT=8001
STT_PORT=8002
LLM_PORT=8003
AUDIO_PREPROCESS_PORT=8004

# ===========================================
# Audio Preprocessing Configuration
# ===========================================
AUDIO_DEVICE=cuda
DENOISE_MODEL=deepfilternet

# ===========================================
# TTS Configuration
# ===========================================
TTS_MODEL=jpgallegoar/F5-Spanish
TTS_DEVICE=cuda
# Backend: "f5" (default, high quality) or "kokoro" (lightweight, 210x realtime)
TTS_BACKEND=f5
# Kokoro settings (only used when TTS_BACKEND=kokoro)
# Path to evolved voice tensor (.pt file)
KOKORO_VOICE_PATH=
# Built-in Kokoro voice to use as fallback (ef_dora, em_alex, em_santa)
KOKORO_VOICE_STYLE=ef_dora
# Language code ("e" = Spanish)
KOKORO_LANG=e

# ===========================================
# STT Configuration
# ===========================================
STT_MODEL=large-v3
STT_DEVICE=cuda
STT_LANGUAGE=es

# ===========================================
# Call Center Settings
# ===========================================
CALL_CENTER_NAME=AI Call Center
CALL_CENTER_GREETING=Hola, bienvenido al servicio de atención. ¿En qué puedo ayudarle?
MAX_CALL_DURATION_SECONDS=600

# ===========================================
# Storage Configuration
# ===========================================
STORAGE_BACKEND=both  # Options: local, s3, both
STORAGE_LOCAL_PATH=./data/recordings

# S3 Configuration (if using S3)
S3_BUCKET=my-call-center-recordings
S3_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key

# ===========================================
# Audio Processing Features
# ===========================================
ENABLE_DENOISE=true
ENABLE_TARGET_EXTRACTION=true
ENABLE_PROSODY_ANALYSIS=true

# ===========================================
# STT Enhanced Features
# ===========================================
ENABLE_STT_CORRECTION=true
ENABLE_STT_CLARIFICATION=true
ENABLE_ONLINE_CORRECTION=true
ENABLE_OFFLINE_BATCH=true

# ===========================================
# Processing Configuration
# ===========================================
# Online processing (durante llamada)
ONLINE_CLARIFICATION_THRESHOLD=0.5  # Strict for online mode

# Offline processing (post-procesamiento)
OFFLINE_RETRANSCRIBE_WER_THRESHOLD=0.2  # Re-transcribe if WER > 20%
BATCH_PROCESSING_HOUR=2  # Run batch at 2 AM
BATCH_MAX_CONCURRENT=10  # Max parallel processing

# ===========================================
# Webhooks
# ===========================================
WEBHOOK_ENABLED=false
WEBHOOK_URL=https://your-endpoint.com/webhook
WEBHOOK_SECRET=your-secret-key
